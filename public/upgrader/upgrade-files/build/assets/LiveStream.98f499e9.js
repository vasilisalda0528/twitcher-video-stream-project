import{r as o,b as g,a as r,j as a,F as x}from"./app.70eb7c5f.js";import{F as w}from"./Front.5dab1473.js";import{_ as n}from"./Translate.dc83ae5b.js";import v from"./ChatRoom.92cfc47e.js";import b from"./VideoJs.f0c60e52.js";import y from"./StreamInstructions.01197abd.js";import"./index.esm.dc99be0f.js";import"./iconBase.19c775b5.js";import"./index.esm.b743b834.js";import"./index.esm.b47aa8e1.js";import"./transition.a700d2e8.js";import"./Modal.ea61d8f0.js";import"./react-toastify.esm.b9d392e3.js";import"./TextInput.9faad775.js";import"./index.esm.80e20a61.js";import"./TipPopup.4b7e6cdd.js";import"./PrimaryButton.09893f04.js";import"./InputLabel.b913582c.js";import"./Textarea.d9722257.js";import"./NumberInput.2414086a.js";import"./SecondaryButton.d42a89f3.js";import"./react-tooltip.esm.min.cb5a3799.js";/* empty css                      */function D({isChannelOwner:R,streamUser:e,roomName:s}){var l;const[p,m]=o.exports.useState(e.live_status!=="online"),[u,d]=o.exports.useState(!0),{auth:i}=g().props;console.info(`${route("home")}/livestreams/${s}.m3u8`);const c=o.exports.useRef(null),f={autoplay:!1,controls:!0,responsive:!0,fill:!0,preload:"auto",fluid:!0,sources:[{src:`${route("home")}/livestreams/${s}.m3u8`,type:"application/x-mpegURL"}]},h=t=>{c.current=t,t.on("waiting",()=>{console.log("player is waiting")}),t.on("dispose",()=>{console.log("player will dispose")})};return o.exports.useEffect(()=>{window.Echo.channel(`room-${e.username}`).listen(".livestream.started",t=>{m(!1)}).listen(".livestream.refresh",t=>{window.location.href=route("channel.bannedFromRoom",{user:e.username})}).listen(".livestream.stopped",t=>{m(!0)})},[]),r(w,{extraHeader:!0,extraHeaderTitle:n("@:username's Live Stream",{username:e.username}),extraHeaderImage:"/images/live-stream-icon.png",extraImageHeight:"h-10",children:a("div",{className:"sm:-mt-[70px] -mt-[110px] flex max-w-7xl flex-col lg:flex-row lg:justify-between items-start h-fit",children:[r("div",{className:"w-full h-full",children:p?r(y,{streamKey:s,streamUser:e.username}):a(x,{children:[e.username===((l=i==null?void 0:i.user)==null?void 0:l.username)&&a("div",{className:`${u?"flex":"hidden"} mb-3 mt-5 lg:mt-0 p-3 bg-white dark:bg-zinc-800 dark:text-white text-indigo-700 font-medium`,children:[n("If you just started streaming in OBS, refresh this page after 30 seconds to see your stream."),r("button",{className:"ml-2 border-b border-indigo-700 dark:border-white",onClick:t=>d(!1),children:n("Close message")})]}),r(b,{options:f,onReady:h})]})}),r(v,{streamer:e})]})})}export{D as default};
