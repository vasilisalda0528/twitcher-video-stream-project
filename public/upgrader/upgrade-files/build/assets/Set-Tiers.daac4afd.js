import{b as L,r as c,u as Y,j as t,a as e,H as O,L as E,f as b}from"./app.70eb7c5f.js";import{A as F}from"./AuthenticatedLayout.37d9e013.js";import{_ as a}from"./Translate.dc83ae5b.js";import{I as m}from"./InputLabel.b913582c.js";import{T as d}from"./TextInput.9faad775.js";import{I as i}from"./InputError.afc03b2f.js";import{T as v}from"./Textarea.d9722257.js";import{P as x}from"./PrimaryButton.09893f04.js";import{M as f}from"./Modal.ea61d8f0.js";import{n as G}from"./index.9a52c726.js";import{D as R}from"./DangerButton.dc51b525.js";import{S as _}from"./SecondaryButton.d42a89f3.js";import{a as W}from"./Front.5dab1473.js";import{d as J}from"./index.esm.dc99be0f.js";import K from"./AccountNavi.ce160f74.js";import{c as Q}from"./index.esm.80e20a61.js";import"./transition.a700d2e8.js";import"./iconBase.19c775b5.js";import"./index.esm.b743b834.js";import"./index.esm.b47aa8e1.js";import"./react-toastify.esm.b9d392e3.js";function fe({auth:w,tiers:h,thanksMsg:T}){L().props;const[C,o]=c.exports.useState(!1),[S,N]=c.exports.useState(!1),[D,p]=c.exports.useState(!1),[g,P]=c.exports.useState(0),[y,M]=c.exports.useState(T),{data:l,setData:I,post:A,processing:k,errors:r,reset:j}=Y({tier_name:"",perks:"",tier_price:"",six_months_discount:10,one_year_discount:20}),n=s=>{I(s.target.name,s.target.type==="checkbox"?s.target.checked:s.target.value)},q=s=>{s.preventDefault(),A(route("membership.add-tier"),{onSuccess:()=>{o(!1),j()}})},z=s=>{s.preventDefault(),b.Inertia.visit(route("membership.save-thanks",{thanks_message:y}),{method:"POST"})},B=(s,u)=>{s.preventDefault(),p(!0),P(u)},H=()=>{console.log("Will delete #"+g),b.Inertia.visit(route("membership.delete-tier"),{method:"POST",data:{tier:g},preserveState:!1})};return t(F,{auth:w,children:[e(O,{title:a("Channel Membership Tiers")}),t("div",{className:"lg:flex lg:space-x-10",children:[e(K,{active:"tiers"}),t("div",{className:"p-4 flex-shrink sm:p-8 bg-white dark:bg-zinc-900 shadow sm:rounded-lg",children:[t("header",{children:[t("h2",{className:"text-lg inline-flex items-center md:text-xl font-medium text-gray-600 dark:text-gray-100",children:[e(Q,{className:"mr-2"}),a("Channel Membership Tiers")]}),e("p",{className:"mt-1 mb-2 text-sm text-gray-600 dark:text-gray-400",children:a("Set the subscription prices and perks for your channel")}),e(x,{onClick:s=>o(!0),children:a("+Add Tier")}),e(_,{className:"ml-2",onClick:s=>N(!0),children:a("Configure Thanks Message")})]}),e("hr",{className:"my-5"}),e(f,{show:S,onClose:s=>N(!1),children:t("div",{className:"p-5 text-gray-600 dark:text-gray-100 text-lg text-center",children:[a("Here you can configure a thanks message which will be sent as a notification to users which just subscribed to any of your tiers"),e("form",{onSubmit:z,children:t("div",{className:"my-4",children:[e(v,{name:"thanks_message",value:y,handleChange:s=>{M(s.target.value)},required:!0,className:"mt-1 block w-full"}),e(i,{message:r.thanks_message,className:"mt-2"}),e(x,{processing:k,className:"mt-4",children:a("Save")})]})})]})}),e(f,{show:C,onClose:s=>o(!1),children:e("div",{className:"p-5",children:t("form",{onSubmit:q,children:[t("div",{className:"mb-4",children:[e(m,{for:"tier_name",value:a("Tier Name")}),e(d,{name:"tier_name",value:l.tier_name,handleChange:n,required:!0,className:"mt-1 block w-full"}),e(i,{message:r.tier_name,className:"mt-2"})]}),t("div",{className:"flex flex-col md:flex-row md:justify-between",children:[t("div",{className:"mb-4",children:[e(m,{for:"tier_price",value:a("Tier Price (Tokens)")}),t("div",{className:"flex items-center",children:[e(d,{name:"tier_price",value:l.tier_price,handleChange:n,required:!0,className:"mt-1 block w-24"}),e("div",{className:"ml-1 dark:text-white text-gray-700",children:a(" tokens/month")})]}),e(i,{message:r.tier_price,className:"mt-2"})]}),t("div",{className:"mb-4",children:[e(m,{for:"six_months_discount",value:a("6 Months Discount Percentage")}),t("div",{className:"flex items-center",children:[e(d,{name:"six_months_discount",value:l.six_months_discount,handleChange:n,required:!0,className:"mt-1 block w-24"}),e("div",{className:"ml-1 dark:text-white text-gray-700",children:a("%")})]}),e(i,{message:r.six_months_discount,className:"mt-2"})]}),t("div",{className:"mb-4",children:[e(m,{for:"one_year_discount",value:a("1 Year Discount Percentage")}),t("div",{className:"flex items-center",children:[e(d,{name:"one_year_discount",value:l.one_year_discount,handleChange:n,required:!0,className:"mt-1 block w-24"}),e("div",{className:"ml-1 dark:text-white text-gray-700",children:a("%")})]}),e(i,{message:r.one_year_discount,className:"mt-2"})]})]}),t("div",{className:"mb-4",children:[e(m,{for:"",value:a("Perks & Benefits")}),e(v,{name:"perks",value:l.perks,handleChange:n,required:!0,className:"mt-1 block w-full"}),e(i,{message:r.perks,className:"mt-2"})]}),t("div",{className:"flex justify-between items-center",children:[e(x,{processing:k,children:a("Save Tier")}),e("a",{className:"cursor-pointer ml-2 text-sm text-rose-600 hover:text-rose-800",onClick:s=>o(!1),children:a("Cancel")})]})]})})}),e(f,{show:D,onClose:s=>p(!1),children:t("div",{className:"px-5 py-10 text-center",children:[e("h3",{className:"text-xl mb-3 text-zinc-700 dark:text-white",children:a("Are you sure you want to remove this Tier?")}),e(R,{onClick:s=>H(),children:a("Yes")}),e(_,{className:"ml-3",onClick:s=>p(!1),children:a("No")})]})}),e("span",{className:"text-gray-600",children:!h.length&&a("You did't create any membership tiers yet.")}),h.length&&e("div",{className:"relative overflow-x-auto mt-5",children:t("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-zinc-800 dark:text-gray-400",children:t("tr",{children:[e("th",{className:"px-6 py-3",children:a("Tier")}),e("th",{className:"px-6 py-3",children:a("Price (Tokens)")}),e("th",{className:"px-6 py-3",children:a("6 Mths %")}),e("th",{className:"px-6 py-3",children:a("1 Yr %")}),e("th",{className:"px-6 py-3",children:a("Perks")}),e("th",{className:"px-6 py-3",children:a("Members")}),e("th",{className:"px-6 py-3",children:"-"})]})}),e("tbody",{children:h.map(s=>t("tr",{className:"bg-white border-b dark:bg-zinc-900 dark:border-zinc-700",children:[e("td",{className:"px-6 py-4 text-lg font-semibold",children:s.tier_name}),e("td",{className:"px-6 py-4",children:e("span",{className:"px-2 flex py-1 rounded-lg bg-sky-500 text-white",children:a(":tokensPrice tokens",{tokensPrice:s.price})})}),e("td",{className:"px-6 py-4",children:t("span",{className:"px-2 py-1 rounded-lg bg-teal-500 text-white",children:[s.six_months_discount,"%"]})}),e("td",{className:"px-6 py-4",children:t("span",{className:"px-2 py-1 rounded-lg bg-fuchsia-500 text-white",children:[s.one_year_discount,"%"]})}),e("td",{className:"px-6 py-4",children:G(s.perks)}),e("td",{className:"px-6 py-4",children:e("span",{className:"px-2 py-1 rounded-lg bg-neutral-300 text-neutral-700",children:s.subscribers_count})}),e("td",{className:"px-6 py-4",children:t("div",{className:"flex items-center",children:[e(E,{href:route("membership.edit-tier",{tier:s.id}),children:e(J,{className:"w-6 h-6 mr-2 text-sky-600"})}),e("button",{onClick:u=>B(u,s.id),children:e(W,{className:"text-red-600 w-5 h-5"})})]})})]},s.id))})]})})]})]})]})}export{fe as default};
